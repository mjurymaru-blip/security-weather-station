# Security Weather Station - 将来の拡張ロードマップ v2

## レビュー結果サマリー

### ChatGPT/Gemini 共通見解

| 項目 | 結論 |
|------|------|
| Phase 2.1 (履歴/Trend) | **最優先** - 体験価値を最大化 |
| Phase 1.1 (APIキー暗号化) | 重要だが「必須」ではない。思想強化 |
| Phase 2.2 (注意報) | 慎重に。通知疲れリスクあり |
| Phase 3.2 (カスタムRSS) | **削除推奨** - CORS問題・サポートコスト高 |

### 重要な指摘

> ⚠️ **XSSは完全には防げない**
> 暗号化しても、復号後はJSのメモリ上にキーが存在する。
> これは「盗まれにくくする」対策であり「盗めなくする」対策ではない。
> → **READMEに必ず明記すべき**

---

## 修正版ロードマップ

### 🥇 Phase 2.1: 履歴/Trend表示（最優先）

**理由:** 
- 体験価値を最大化
- 「今日だけでなく流れを見る」という時間軸の思想を具現化
- データ蓄積が必要なので早めに実装

**仕様:**
- IndexedDB に日次レポートを保存
- **保持期間: 14日**（ChatGPT/Gemini共に推奨）
- 設定なし（自動ローテーション）

**UIモックアップ:**
```
     ⛈️
  🌧️    🌧️
⛅         ⛅  ⛅
☀️               ☀️  ← 今日
─┼──┼──┼──┼──┼──┼──┼─
 月  火  水  木  金  土  日
```

**推定工数:** 6-8時間

---

### 🥈 Phase 1.1: APIキー暗号化

**理由:**
- 思想と安心感の強化
- 「意識高い系個人向けツール」として自然

**仕様:**
- Web Crypto API + マスターパスワード
- PBKDF2 で鍵生成 → AES-GCM で暗号化
- **「パスワードを記憶」オプションは不要**（ChatGPT推奨）
- 復号後のキーは Session Storage に置く（タブを閉じれば消える）

**将来の拡張案:**
- WebAuthn (生体認証/Passkeys) 対応（Gemini提案）

**推定工数:** 4-6時間

> [!IMPORTANT]
> READMEに以下を追記:
> - XSSに対する限界の説明
> - 暗号化は「盗まれにくくする」対策であること

---

### 🥉 Phase 2.2: 注意報システム（慎重に）

**理由:**
- 「自分に関係がある」と気づかせる機能
- ただし通知疲れリスクあり

**制約（ChatGPT推奨）:**
- 初期状態では OFF
- 1日1回まで
- 「警報のみ」から開始（注意報は後）

**推定工数:** 3-4時間

---

### 💤 Phase 3.1: 詳細フィルタリング（余力があれば）

**理由:**
- 設定が増えると「管理するアプリ」になる
- 急がなくていい

**推定工数:** 2-3時間

---

### ❌ Phase 3.2: カスタムRSS（削除）

**削除理由（両AIが一致）:**
- CORS問題が常に付きまとう
- サポートコストが高い
- UXトラブルの温床

**代替案:**
- 「将来対応予定」とREADMEに書くだけで十分
- GitHub Advisory Database連携を代替として検討（Gemini提案）

---

## 追加提案（Geminiから）

### 共有機能（お裾分け）

「今日のセキュリティ天気」を：
- 画像として生成（OGP形式）
- テキストでクリップボードにコピー
- チームのSlackに貼れる

→ 個人開発者からチームへの普及に繋がる

**優先度:** 低（余力があれば）

---

## 最終優先順位

| 順位 | Phase | 機能 | 工数 | 状態 |
|------|-------|------|------|------|
| 1 | 2.1 | 履歴/Trend表示 | 6-8h | 🔜 次回 |
| 2 | 1.1 | APIキー暗号化 | 4-6h | 待機 |
| 3 | 2.2 | 注意報システム | 3-4h | 待機 |
| 4 | 3.1 | フィルタリング設定 | 2-3h | 待機 |
| - | 3.2 | カスタムRSS | - | ❌ 削除 |
| - | - | 共有機能 | 3-4h | 検討中 |

---

## 次のアクション

1. **READMEにSecurity Considerationsセクションを追加**
   - APIキー管理の限界を明記
   - XSSリスクについて説明

2. **Phase 2.1の実装開始**
   - IndexedDBスキーマ設計
   - 履歴保存ロジック
   - Trendグラフコンポーネント

どちらから始めますか？
